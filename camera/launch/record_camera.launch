<?xml version="1.0"?>
<launch>
    <!-- Include the camera launch file -->
    <include file="$(find camera_aravis)/launch/basler_camera.launch"/>
    
    <!-- Record to rosbag -->
    <node name="rosbag_record" pkg="rosbag" type="record" 
          args="-O /catkin_ws/bags/camera_$(arg timestamp).bag 
                /aravis_camera_node/image_raw 
                /aravis_camera_node/camera_info
                /tf
                /tf_static"
          output="screen">
        <param name="timestamp" value="$(eval '$(anon record_')"/>
    </node>
    
    <!-- Optional: Image view for monitoring -->
    <node name="image_view" pkg="image_view" type="image_view" respawn="false" output="screen">
        <remap from="image" to="/aravis_camera_node/image_raw"/>
    </node>
</launch>